<html>
  <head>
    <title>Student Bootcamp - RBAC Exercises</title>

    <link rel="stylesheet" href="styles/ui.css"/>

    <script>

      function reveal( targetName )
      {
        target = document.getElementById(targetName);

        target.style.display = ( target.style.display == "block" ? "none" : "block" );
      }

    </script>
  </head>

  <body>
    <div style="width:100%;" align="right"><img src="images/redhat.png" width="250px"/></div>

    <div style="padding:10px">
    <h1>Student Bootcamp - OpenShift RBAC Exercises</h1>

    Welcome to the Red Hat Student Bootcamp OpenShift RBAC exercises. This page will guide you through examining the objects within OpenShift that provide the RBAC functionality; this session should take about 30 minutes,
    but the cluster will remain up and active for the rest of the day if you run out of time.<br/><br/>

    For this exercise please use the Cluster URL provided, along with the username (format userX where X is a number) and the password <b>openshift</b><br/><br/>

    <h2>Logging on to the system</h2>
    
    Go the URL provided for the Cluster.<br/><br/>
    Your username will be "userX" where X is a number. Your password is <b>openshift</b>.<br/><br/>
    Once you have logged in you may be presented with the developer's perspective; for this exercise we will be using the  administrator's perspective. Switch to the administrator's perspective using the pulldown at the top left of the user interface.<br/><br/>

    <img src="images/rbac1.png" width="300px"/><br/><br/>

    <h2>Creating a Project/Namespace</h2>

    In order to examine the Objects used to access OpenShift we will create a project from scratch.<br/><br/>

    Open the Project tab by going to Home/Projects.<br/><br/>

    Click on "Create Project".<br/><br/>

    Set the name of your project to "rbactestX", replacing X with your user number.<br/><br/>

    <img src="images/rbac2.png" width="600px"/><br/><br/>

    Hit "Create" to create the project.<br/><br/>

    <h2>Examining the default rolebindings for a project</h2>

    When you have created the project you will be at the Overview tab for the newly created project. Click on "RoleBindings".<br/><br/>

    <img src="images/rbac3.png" width="100%"/>

    This page shows a summary of the RBAC Role Bindings currently active for this project. Note that the User who created the project, yourself, has the Cluster Role of <b>admin</b> bound to the namespace, giving you the ability to create and delete resources within the project.<br/><br/>

    Note also the system:image-pullers role binding applied to 'Group'. This means that any Service Account in the group system:serviceaccounts:rbactest1 can pull images from the integrated registry. This nomenclature of 'system.serviceaccounts.(x)', where x is a namespace, allows for wildcard application of rolebindings.<br/><br/>

    <h2>Examining the Service Accounts for a Project</h2>

    Using the left-hand navigation bar, select User Management/ServiceAccounts.<br/><br/>

    <img src="images/rbac4.png" width="100%"/>

    Note the three ServiceAccounts created when the Project was created. The <b>default</b> ServiceAccount is the one that is used by default when no other ServiceAccount is defined as part of the specification for an Object. Both <b>builder</b> and <b>deployer</b> are special case ServiceAccounts that are used to build composite images (when you do a source-to-image build) and when you deploy images to worker nodes. Both of these actions need additional system privileges that should not be available to the default ServiceAccount, so these are provisioned to allow the User to create Images and deploy Pods.<br/><br/>

   <h2>Examining Roles</h2>

   Roles are the lists of actions that can be applied to Objects. You can view these by going, on the left-hand navigation panel, to User Management/Roles.<br/><br/>

   Click on the 'Admin' role and have a look at the varied set of verbs, the objects they can be applied to (listed under 'Resources') and the API Groups that control them.<br/><br/>

   <img src="images/rbac5.png" width="100%"/>

  </body>
</html>
